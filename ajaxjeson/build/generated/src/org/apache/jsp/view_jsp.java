package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import java.sql.*;;

public final class view_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final JspFactory _jspxFactory = JspFactory.getDefaultFactory();

  private static java.util.List<String> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.ArrayList<String>(3);
    _jspx_dependants.add("/header.jsp");
    _jspx_dependants.add("/db.jsp");
    _jspx_dependants.add("/footer.jsp");
  }

  private org.glassfish.jsp.api.ResourceInjector _jspx_resourceInjector;

  public java.util.List<String> getDependants() {
    return _jspx_dependants;
  }

  public void _jspService(HttpServletRequest request, HttpServletResponse response)
        throws java.io.IOException, ServletException {

    PageContext pageContext = null;
    HttpSession session = null;
    ServletContext application = null;
    ServletConfig config = null;
    JspWriter out = null;
    Object page = this;
    JspWriter _jspx_out = null;
    PageContext _jspx_page_context = null;

    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;
      _jspx_resourceInjector = (org.glassfish.jsp.api.ResourceInjector) application.getAttribute("com.sun.appserv.jsp.resource.injector");

      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("<html>\n");
      out.write("    <head>\n");
      out.write("        <title>add form</title>\n");
      out.write("        <meta charset=\"UTF-8\">\n");
      out.write("        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n");
      out.write("         <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n");
      out.write("        <link href=\"css/bootstrap.css\" rel=\"stylesheet\" type=\"text/css\" media=\"all\" />\n");
      out.write("       \n");
      out.write("         <link href=\"css/parasa.css\" rel=\"stylesheet\" type=\"text/css\" media=\"all\" />\n");
      out.write("        <link href=\"css/font-awesome.min.css\" rel=\"stylesheet\" type=\"text/css\" media=\"all\" />\n");
      out.write("        <link href=\"css/select2.css\" rel=\"stylesheet\" type=\"text/css\"/>\n");
      out.write("    </head>\n");
      out.write("    <div id=\"show messgage\" style=\"display:none; height:35px;margin-top:8px; margin-bottom:22px;\"></div>");
      out.write('\n');
      out.write('\n');
      out.write('\n');
      out.write("\n");
      out.write("\n");
      out.write("\n");

          Class.forName("com.mysql.jdbc.Driver");
        Connection con=DriverManager.getConnection("jdbc:mysql://localhost:3306/ajaxdemo","root","");
        out.println("connection successfully");
    

      out.write("\n");
      out.write("<body>\n");
      out.write("  <input type=\"hidden\"  id=\"viewallact\" name=\"viewallact\" value=\"viewall\"/>\n");
      out.write("   <input type=\"hidden\"  id=\"addact\"  name=\"addact\" value=\"add\"/>\n");
      out.write("    <input type=\"hidden\"  id=\"delact\" name=\"deletact\" value=\"delete\"/>\n");
      out.write("       <input type=\"hidden\"  id=\"showact\" name=\"showact\" value=\"show\"/>\n");
      out.write("  <input type=\"hidden\"  id=\"updateact\" name=\"updateact\" value=\"Update\"/>\n");
      out.write("  \n");
      out.write("  <div id=\"page-wrapper\">\n");
      out.write("      \n");
      out.write("      <div class=\"container-fluid\">\n");
      out.write("          <div class=\"row\">\n");
      out.write("              \n");
      out.write("              <button type=\"button\" class=\"btn btn-info btn-lg\"  data-toggle =\"modal\" data-target=\"#myModal\" >Add Student</button>\n");
      out.write("              \n");
      out.write("              <h2>Student info</h2>\n");
      out.write("              <div class=\"table responsive\">\n");
      out.write("                  \n");
      out.write("                 <table id=\"stuinfotb1\" class=\"table table-bordered table-hover table-striped\">\n");
      out.write("                     <thead><tr>\n");
      out.write("                             <th> ID</th>\n");
      out.write("                                  <th> ID</th>  \n");
      out.write("                                  <th> NAME</th>   \n");
      out.write("                                  <th> MOBILE</th>\n");
      out.write("                                  <th> Gender</th>\n");
      out.write("                                  <th> Action</th>\n");
      out.write("                           </tr>\n");
      out.write("                     </thead>     \n");
      out.write("                     <tbody>\n");
      out.write("                         ");
 int count=0;
                         Statement st=con.createStatement();
                         ResultSet rs=st.executeQuery("select * from student");
                         while(rs.next())
                         {
                             rs.getInt("id");
                             
      out.write("\n");
      out.write("                             <tr>\n");
      out.write("                                 <td><div align=\"center\">");
      out.print(++count);
      out.write("</div>    </td>   \n");
      out.write("                                 <td>");
      out.print(rs.getString("name"));
      out.write("</td>\n");
      out.write("                                  <td>");
      out.print(rs.getString("mobile"));
      out.write("</td>\n");
      out.write("                                   <td>");
      out.print(rs.getString("email"));
      out.write("</td>\n");
      out.write("                                    <td>");
      out.print(rs.getString("gender"));
      out.write("</td>\n");
      out.write("                                    <td><div align=\"center\"><a href=\"javascript:showmodel(");
      out.print(rs.getInt("id"));
      out.write(")\">Edit</a><a href=\"javascript:showdelmodel(");
      out.print(rs.getInt("id"));
      out.write(")\">Delete </a></div></td>\n");
      out.write("                             </tr>\n");
      out.write("                             ");
}
      out.write("\n");
      out.write("                     </tbody>\n");
      out.write("                 </table>\n");
      out.write("              </div>\n");
      out.write("          </div>\n");
      out.write("                     <!--/.row-->\n");
      out.write("      </div>\n");
      out.write("                     <!--container field-->\n");
      out.write("  </div>\n");
      out.write("                     \n");
      out.write("                     \n");
      out.write("                     \n");
      out.write("                     <div id=\"delModal\" class=\"modal fade\" role= \"dialog\">\n");
      out.write("                      <div class=\"modal-dialog\">   \n");
      out.write("                         \n");
      out.write("                       <div class=\"modal-content\">    \n");
      out.write("                            <div class=\"modal-header\"> \n");
      out.write("                                <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n");
      out.write("                                <h4 clas=\"modal-body\"></h4>\n");
      out.write("                                </div>\n");
      out.write("                           <div class=\"modal-body\">\n");
      out.write("                               <p> Do you really want to delete??</p>\n");
      out.write("                              \n");
      out.write("                               \n");
      out.write("                               \n");
      out.write("                \n");
      out.write("                           </div>\n");
      out.write("                           <div class=\"modal-footer\">\n");
      out.write("                               <a href=\"javascript:deletestu()\" id=\"btnYes\"   class=\"btn danger\">Yes</a>\n");
      out.write("                               <a href=\"#\" data-dismiss=\"modal\" aria-hidden=\"true\" class=\"btn secondary\"> No </a>\n");
      out.write("                               </div>\n");
      out.write("                               \n");
      out.write("                                </div>\n");
      out.write("                               \n");
      out.write("                               \n");
      out.write("                               \n");
      out.write("                           </div>\n");
      out.write("                         \n");
      out.write("                     </div>                  \n");
      out.write("                     \n");
      out.write("                     \n");
      out.write("                     <div id=\"myModal\" class=\"modal fade\" role=\"dialog\">\n");
      out.write("                         <div class=\"modal-dialog\">\n");
      out.write("                         <div class=\"modal-content\">\n");
      out.write("                         <div class=\"modal-header\">\n");
      out.write("                             \n");
      out.write("                              <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n");
      out.write("                            \n");
      out.write("                             <h4 class=\"modal-title\"> please Fill up Student info</h4>\n");
      out.write("                             </div>\n");
      out.write("                             <div class=\"modal-body\">\n");
      out.write("                                 <form id=\"stufrm\" name=\"stufrm\" method=\"post\" enctype=\"multipart/form-data\">\n");
      out.write("                                     <input type=\"hidden\" id=\"id\" name=\"id\"/>\n");
      out.write("                                     <div class=\"row\">\n");
      out.write("                                         \n");
      out.write("                                       <div class=\"col-lg-8\">\n");
      out.write("                                           <div class=\"form-group\">\n");
      out.write("                                               <label for=\"receipent-name\" class=\"control-label\"> Name</label>\n");
      out.write("                                               \n");
      out.write("                                               <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\">\n");
      out.write("                                               \n");
      out.write("                                           </div>\n");
      out.write("                                     </div>\n");
      out.write("                                 \n");
      out.write("                                 \n");
      out.write("                             </div>\n");
      out.write("                                     <div class=\"row\">\n");
      out.write("                                         <div class=\"col-lg-8\">\n");
      out.write("                                             <div class=\"form-group\">\n");
      out.write("                                               <label for=\"receipent-name\" class=\"control-label\">Mobile Number</label>\n");
      out.write("                                               \n");
      out.write("                                               <input type=\"text\" class=\"form-control\" minlength=\"10\" maxlength=\"10\" id=\"mobile\" name=\"mobile\">\n");
      out.write("                                             </div>\n");
      out.write("                                           </div>\n");
      out.write("                                         </div>\n");
      out.write("                                     \n");
      out.write("                                     \n");
      out.write("                                     <div class=\"row\">\n");
      out.write("                                         <div class=\"col-lg-8\">\n");
      out.write("                                             <div class=\"form-group\">\n");
      out.write("                                               <label for=\"receipent-name\" class=\"control-label\">Email</label>\n");
      out.write("                                               \n");
      out.write("                                               <input type=\"text\" class=\"form-control\"  id=\"email\" name=\"email\">\n");
      out.write("                                             </div>\n");
      out.write("                                           </div>\n");
      out.write("                                         </div>\n");
      out.write("                                     <div class=\"row\">\n");
      out.write("                                         <div class=\"col-lg-8\">\n");
      out.write("                                             <div class=\"form-group\">\n");
      out.write("                                               <label for=\"receipent-name\" class=\"control-label\">Gender</label>\n");
      out.write("                                               \n");
      out.write("                                               <select id=\"gender\" name=\"gender\">\n");
      out.write("                                                   <option value=\"\">Select Gender</option>  \n");
      out.write("                                                   <option value=\"male\">Male</option>  \n");
      out.write("                                                   <option value=\"female\">Female</option>  \n");
      out.write("                                                   \n");
      out.write("                                                   \n");
      out.write("                                                   \n");
      out.write("                                               </select>\n");
      out.write("                                             </div>\n");
      out.write("                                           </div>\n");
      out.write("                                         </div>\n");
      out.write("                                      <div class=\"row\">\n");
      out.write("                                          <div class=\"col-lg-8\">\n");
      out.write("                                              <div id=\"showbtn\">\n");
      out.write("                                                  <button type=\"button\" id=\"addbtn\" class=\"btn btn-primary\" onClick=\"savestu()\">SAVE STUDENT</button>\n");
      out.write("                                                  \n");
      out.write("                                                  \n");
      out.write("                                              </div>\n");
      out.write("                                          </div>\n");
      out.write("                                          </div>\n");
      out.write("                             </div>\n");
      out.write("                         </div>\n");
      out.write("                     \n");
      out.write("                             </form>\n");
      out.write("                                 </div>                          \n");
      out.write("                         <div class=\"modal-footer\">                            \n");
      out.write("                         </div>                            \n");
      out.write("                         </div>                 \n");
      out.write("                  \n");
      out.write("              \n");
      out.write("          \n");
      out.write("          \n");
      out.write("          \n");
      out.write("         \n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("     <script src=\"js/jquery.min.js\"></script>\n");
      out.write("    <script src=\"js/bootstrap.min.js\"></script> \n");
      out.write("    \n");
      out.write("    <!--<script src=\"js/additional-methods.min.js\" type=\"text/javascript\"></script>-->\n");
      out.write("    \n");
      out.write("    \n");
      out.write("    \n");
      out.write("    <script src=\"js/bootstrap-datepicker.min.js\" type=\"text/javascript\"></script>\n");
      out.write("    <script src=\"js/jquery.validate.min.js\" type=\"text/javascript\"></script>\n");
      out.write("    <script src=\"js/jquery.dataTables.min.js\" type=\"text/javascript\"></script>\n");
      out.write("    <script src=\"js/table_dynamic.js\" type=\"text/javascript\"></script>\n");
      out.write("   <script src=\"js/select2.min.js\" type=\"text/javascript\"></script>\n");
      out.write("   \n");
      out.write("   <script>\n");
      out.write("        \n");
      out.write("        function showmessage(type,msg)\n");
      out.write("        {\n");
      out.write("            var str='';\n");
      out.write("            if(type==\"success\")\n");
      out.write("            {\n");
      out.write("                str=\"<div class='alert alert-succeess alert-dismissable'>\n");
      out.write("                <a href='#' onclick=\\\"$(\"#showmessage\").css('display','none');\\\" \n");
      out.write("                class='close' data dismiss='alert' aria-label= 'close'></a><strong>well Done!</strong>&nbsp;\"+msg+\"</div>\";\n");
      out.write("             \n");
      out.write("        }\n");
      out.write("        else if(type==\"error\")\n");
      out.write("        {\n");
      out.write("        str=\"<div class='alert alert-danger alert-dismissable'>\n");
      out.write("        <a href= '#' onclick=\\\"$(\"#showmessage\").css('display','none');\\\" class='close' data dismiss='alert' aria-label= 'close'>x</a><strong>Error occured!</strong>&nbsp;&nbsp;\"+msg+\"</div>\";\n");
      out.write("             \n");
      out.write("        \n");
      out.write("        }\n");
      out.write("        else if(type==\"warning\")\n");
      out.write("        {   \n");
      out.write("        \n");
      out.write("        str=\"<div class='alert alert-warning'>\n");
      out.write("       <strong>warnning!</strong>&nbsp;&nbsp;\"+msg+\"</div>\";\n");
      out.write("             \n");
      out.write("        \n");
      out.write("        \n");
      out.write("        }\n");
      out.write("        $(\"#showmessage\").html(\"\");\n");
      out.write("        $(\"#showmessage\").css(\"display\",\"block\");\n");
      out.write("        $(\"#showmessage\").css(\"height\",\"35px\");\n");
      out.write("        $(\"#showmessage\").append(str);\n");
      out.write("        setTimeout(function(){$(\"#showmessage\").html(\"\");\n");
      out.write("        $(\"#showmessage\").css(\"display\",\"none\");},5000);\n");
      out.write("        }\n");
      out.write("         \n");
      out.write("       \n");
      out.write("        </script>\n");
      out.write("        \n");
      out.write("   </body>\n");
      out.write("   \n");
      out.write("</html>\n");
      out.write("\n");
      out.write("<script>\n");
      out.write("//    $(document).ready(function(){\n");
      out.write("//        viewall();\n");
      out.write("//        var table=$(#stuinfotb1).datatable({\n");
      out.write("//            \n");
      out.write("//            \n");
      out.write("//            \"order\":[[,\"desc\"]],\n");
      out.write("//            \"fnDrawCallback\":function(oSettings){\n");
      out.write("//                $('#b1 thead th').each(function(i)\n");
      out.write("//                        \n");
      out.write("//        {\n");
      out.write("//            if(!$(this).hasClass('tfilter')){\n");
      out.write("//                $(this).removeClass(\"sorting\");\n");
      out.write("//                $(this).off();\n");
      out.write("//            }\n");
      out.write("//        });\n");
      out.write("//            }\n");
      out.write("//        });\n");
      out.write("//            \n");
      out.write("//            \n");
      out.write("//            \n");
      out.write("//});\n");
      out.write("function viewall()\n");
      out.write("{\n");
      out.write("    $.getJSON(\"CRUD.jsp\",{\n");
      out.write("        act:$(\"#viewallact\").val()\n");
      out.write("    \n");
      out.write("    },displayResult);               \n");
      out.write("}\n");
      out.write("    \n");
      out.write("  function displayResult(data){\n");
      out.write("         \n");
      out.write("     var arr1=JSON.stringify(data);\n");
      out.write("     var arr=JSON.parse(arr1);\n");
      out.write("     var len=arr.length;\n");
      out.write("     var str=\"\";\n");
      out.write("     for(var i=0;i<len;i++)\n");
      out.write("     {\n");
      out.write("         if(arr[i].id!=0)\n");
      out.write("         {\n");
      out.write("             str=str+\"<tr><td><div align='center'>\"+arr[i].id+\"</div></td><td>\"+arr[i].name+\"</td><td>\"+arr[i].mobile+\"</td>\n");
      out.write("             <td>\"+arr[i].email+\"</td>\n");
      out.write("             <td>\"+arr[i].gender+\"</td>\n");
      out.write("             <td><div align='center'><a href=\\\"javascript:showmodel(\"+arr[i].id+\")\\\">EDIT</a>\n");
      out.write("             <a href=\\\"javascript:showmodel(\"+arr[i].id+\")\\\">DELETE</a></div></td> </tr>\";\n");
      out.write("             \n");
      out.write("         }\n");
      out.write("     }    \n");
      out.write("     $(\"#stuinfotb1>tbody:last\").html(\"\");\n");
      out.write("     $(\"#stuinfotb1>tbody:last\").append(str);\n");
      out.write(" }\n");
      out.write(" function savestu()\n");
      out.write(" {\n");
      out.write("     $.get(\"CRUD.jsp\"),{\n");
      out.write("         name:$(\"#name\").val(),\n");
      out.write("           mobile:$(\"#mobile\").val(),\n");
      out.write("             email:$(\"#email\").val(),\n");
      out.write("               gender:$(\"#gender\").val(),  \n");
      out.write("               act:$(\"#addact\").val()\n");
      out.write("           },doInsert);\n");
      out.write("           \n");
      out.write("               \n");
      out.write("     }\n");
      out.write("     function doInsert(response){\n");
      out.write("         if(response){\n");
      out.write("             showmessage(\"success\",\"Inserted successfully\");\n");
      out.write("             clearstu();\n");
      out.write("             $(\"#myModal\").modal(\"hide\");\n");
      out.write("             viewall();\n");
      out.write("         }\n");
      out.write("         else{\n");
      out.write("             showmessage(\"error\",\"some Error occured\");\n");
      out.write("         \n");
      out.write("         }\n");
      out.write("         \n");
      out.write("  }\n");
      out.write("  function showdelmodel(i)\n");
      out.write("  {\n");
      out.write("      document.getElementByid('id').value=i;\n");
      out.write("      $('#delModal').modal('show');\n");
      out.write("      \n");
      out.write("  }\n");
      out.write("    function showmodal(i)\n");
      out.write("    {\n");
      out.write("        document.getElementByid('id').value=i;\n");
      out.write("        $(\"#myModal\").modal('show');\n");
      out.write("        $(\"#showbtn\").html(\"\");\n");
      out.write("        var str='<button type=\"button\" id=\"updatebtn\" class=\"btn btn-primary\" onClick=\"updatestu()\">UPDATE STUDENT</button>';\n");
      out.write("    $(\"#showbtn\").html(str);\n");
      out.write("    $.get(\"CRUD.jsp\",{\n");
      out.write("        id:$(\"#id\").val(),\n");
      out.write("        act:$(\"showact\").val()}\n");
      out.write("    ,doShow);\n");
      out.write("        \n");
      out.write("    }\n");
      out.write("    function doShow(data){\n");
      out.write("        if(data)\n");
      out.write("        {\n");
      out.write("            $(\"#name\").val(data.name);\n");
      out.write("              $(\"#email\").val(data.email);\n");
      out.write("                $(\"#mobile\").val(data.mobile);\n");
      out.write("                  $(\"#gender\").val(data.gender);\n");
      out.write("        }\n");
      out.write("    \n");
      out.write("    }\n");
      out.write("    function updatestu(){\n");
      out.write("        $.get(\"CRUD.jsp\",{\n");
      out.write("            name:$(#name).val();\n");
      out.write("             mobile:$(#mobile).val();\n");
      out.write("             email:$(#email).val();\n");
      out.write("             gender:$(#gender).val();\n");
      out.write("             id:$(\"#id\").val(),\n");
      out.write("             act:$(\"#updateact\").val()\n");
      out.write("             id:$(\"#id\").val(),\n");
      out.write("             act:$(\"#update\").val();\n");
      out.write("         \n");
      out.write("        },doUpdate);\n");
      out.write("     }\n");
      out.write("            \n");
      out.write("            \n");
      out.write("            \n");
      out.write("            \n");
      out.write("        function doUpdate(response)\n");
      out.write("        {\n");
      out.write("            if(response){\n");
      out.write("                showmessage(\"Success\",\"update successfully\");\n");
      out.write("                clearstu();\n");
      out.write("                $('#myModal').modal('hide');\n");
      out.write("                viewall();\n");
      out.write("                $(\"#showbtn\").html(\"\");\n");
      out.write("                \n");
      out.write("                var str='<button type=\"button\" id=\"addbtn\" class=\"btn btn-primary\" onclick=\"savestu()\">SAVEStudent</button>';\n");
      out.write("                $(\"#showbtn\").html(str);\n");
      out.write("            }\n");
      out.write("            else\n");
      out.write("            {\n");
      out.write("                showmessage(\"error\",\"some Error Occured\");\n");
      out.write("                \n");
      out.write("            \n");
      out.write("        } \n");
      out.write("                \n");
      out.write("        }\n");
      out.write("        function doDelete(response)\n");
      out.write("        {\n");
      out.write("            if(response)\n");
      out.write("            {\n");
      out.write("                showmessage(\"success\",\"deleted successfully\");\n");
      out.write("                $('#delModal').modal('hide');\n");
      out.write("                vieall();\n");
      out.write("            }\n");
      out.write("            else\n");
      out.write("            {\n");
      out.write("                showmessage(\"error\",\"some Error Occured\");\n");
      out.write("            }\n");
      out.write("    \n");
      out.write("        }\n");
      out.write("    \n");
      out.write("    function deletestu()\n");
      out.write(" {\n");
      out.write("     $.get(\"CRUD.jsp\"),{\n");
      out.write("         id:$(\"#id\").val(),\n");
      out.write("         \n");
      out.write("          act:$(\"#deleteact\") .val()\n");
      out.write("      },doDelete);  \n");
      out.write("           \n");
      out.write("    \n");
      out.write("    }\n");
      out.write("    \n");
      out.write("    \n");
      out.write("    \n");
      out.write("    function clearstu()\n");
      out.write("    {\n");
      out.write("        $(\"#id\").val(\"\");\n");
      out.write("        $(\"#name\").val(\"\");\n");
      out.write("          $(\"#moble\").val(\"\");\n");
      out.write("            $(\"#email\").val(\"\");\n");
      out.write("             $(\"#gender\").val(\"\");\n");
      out.write(" \n");
      out.write("}\n");
      out.write("    \n");
      out.write("    </script>\n");
      out.write("    </body>");
    } catch (Throwable t) {
      if (!(t instanceof SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          out.clearBuffer();
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
